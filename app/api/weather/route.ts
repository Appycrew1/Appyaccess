import { NextResponse } from "next/server";
export async function GET(req:Request){const {searchParams}=new URL(req.url);const lat=searchParams.get("lat"),lng=searchParams.get("lng");if(!lat||!lng)return NextResponse.json({error:"lat and lng are required"},{status:400});const url=`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lng}&current=temperature_2m,wind_speed_10m,wind_direction_10m,weather_code`;const r=await fetch(url,{cache:"no-store"});if(!r.ok)return NextResponse.json({error:"Weather fetch failed"},{status:500});const data=await r.json();const c=data?.current;return NextResponse.json({temperature:c?.temperature_2m,windspeed:c?.wind_speed_10m,winddirection:c?.wind_direction_10m,weathercode:c?.weather_code});}
