import { NextResponse } from "next/server";import type { PropertySummary } from "@/types";import { fetchEPC } from "@/connectors/property/epc";import { scrapePlanning } from "@/connectors/property/planning_scraper";import { scrapeCPZ } from "@/connectors/property/cpz_scraper";
export async function POST(req:Request){const {postcode,lat,lng}=await req.json().catch(()=>({}));const out:PropertySummary={postcode,uprn:null,epc:null,planningNotes:[],cpz:[]};if(postcode){try{out.epc=await fetchEPC(postcode);}catch{}}if(postcode){try{out.planningNotes=await scrapePlanning(postcode);}catch{}}try{out.cpz=await scrapeCPZ();}catch{}return NextResponse.json(out);} 
